# 6.1 리액트 개발 도구란?(p401-418)

리액트 팀은 리액트 애플리케이션의 원활한 개발을 위해 react-dev-tools라는 개발 도구를 만들어 제공하고 있다.


# 6.3 리액트 개발 도구 활용하기(p403-420)

## 6.3.1 컴포넌트

Components 탭에서 리액트 애플리케이션의 컴포넌트 트리를 확인할 수 있다.  
컴포넌트 구조뿐 아니라 props와 내부 hooks 등 다양한 정보를 확인할 수 있다.


### 컴포넌트 트리(p404-421)
![[Pasted image 20240301222409.png]]

Components 탭의 왼쪽 영역은 리액트 페이지의 컴포넌트 트리를 나타낸다.

기명 함수로 선언되어 있으면 해당 컴포넌트명을 보여주고,  
익명 함수로 선언되어 있으면 Anonymous라는 이름으로 컴포넌트를 보여준다.  

참고로 memo를 사용해 익명 함수로 만든 컴포넌트를 감싸면, 함수명을 명확히 추론하지 못해 Anonymous로 표시된다. 다만, memo 라벨을 통해 memo로 감싸진 컴포넌트임을 알 수 있다.  
또한 고차 컴포넌트의 명칭도 제대로 추론하지 못해 Annonymous로 나온다.

그래서 최대한 기명 함수로 선언하고 만약 기명 함수로 바꾸기 어렵다면 함수에 displayName 속성을 추가하는 방법도 있다.
```tsx
const MemoizedComponent = memo(function () {
  return <>MemoizedComponent</>
})

MemoizedComponent.displayName = '메모 컴포넌트입니다.'
```
이러면 리액트 개발자 도구에서 컴포넌트명을 확인할 수 있다.

### 컴포넌트명과 props(p409-426)
왼쪽 컴포넌트 트리에서 컴포넌트를 선택했을 때 해당 컴포넌트에 대한 자세한 정보를 보여주는 영역이다.

![[Pasted image 20240301222848.png]]

#### 컴포넌트명과 Key
![[Pasted image 20240301223023.png]]
컴포넌트의 명칭과 해당 컴포넌트를 나타낸다.  
만약 해당 애플리케이션이 strict mode로 렌더링되지 않았다면 빨간색 경고 이코티콘을 띄운다.

#### 컴포넌트 도구(p410-427)
컴포넌트 도구에는 3개의 아이콘이 있다.
![[Pasted image 20240301223107.png]]
- 눈 아이콘 : 해당 컴포넌트가 HTML의 어디에서 렌더링됐는지 확인할 수 있다. 누르는 즉시 크롬 개발 도구의 메뉴 중 하나인 요소(Element) 탭으로 즉시 이동하며, 해당 컴포넌트가 렌더링한 HTML 요소가 선택되는 것을 볼 수 있다.
- 벌레 아이콘 : 클릭하는순간콘솔(console)탭에 해당컴포넌트의 정보가 console.log를 실행해 기록된 것을 확인할 수 있다. 여기에는 해당 컴포넌트가 받는 props, 컴포넌트 내부에서 사용하는 hooks. 마지막으로 해당 컴포넌트의 HTML요소인 nodes가 기록된다.
- 소스코드 아이콘 : 해당 컴포넌트의 소스코드를 확인할 수 있다. 그러나 해당 아이콘을 누르면 엄청 긴 줄이 나오기에 눈으로 확인할 수 없다. 그래서 {} 버튼을 누르면 이 문제를 해결할 수 있다.
![[Pasted image 20240301223444.png]]![[Pasted image 20240301223455.png]]

#### 컴포넌트 props(p412-429)
![[Pasted image 20240301223624.png]]
해당 컴포넌트가 받은 props를 확인할 수 있다.
값이 함수인 props를 누르면 Go to definition이 나타나는데, 이를 클릭하면 해당 함수가 선언된 코드로 이동한다.
![[Pasted image 20240301223900.png]]

#### 컴포넌트 hooks(p414-431)
컴포넌트에서 사용 중인 훅 정보를 확인할 수 있다. 여기서 usestate는 State와 같이 use가 생략된 이름으로 나타난다.
![[Pasted image 20240301224407.png]]
리액트 개발자 도구에서 볼 수 있는 훅 목록
- State: useState
- Reducer: useReducer
- Context: useContext
- Memo: useMemo
- Callback: useCallback
- Ref: useRef
- id: useId
- LayoutEffect: useLayoutEffect
- Effect: useEffect

훅도 마찬가지로 훅에 넘겨주는 함수를 익명 함수 대신 기명 함수로 넘겨주면 해당 혹을 실행할 때 실행되는 함수의 이름을 확인할 수 있다.
```tsx
// before
useEffect(() => {
  console.log('useEffect') 
})
// after
useEffect(function effectOnlyMount() => {
  console.log('useEffect') 
})
```

#### 컴포넌트를 렌더링한 주체, rendered by
![[Pasted image 20240301224830.png]]
rendered by는 해당 컴포넌트를 렌더링한 주체가 누구인지 확인할 수 있다. 프로덕션 모드에서는 react-dom의 버전만 확인할 수 있지만 개발 모드에서는 해당 컴포넌트를 렌더링한 부모 컴포넌트까지 확인할 수 있다.

## 6.3.2 프로파일러
프로파일러는 리액트가 렌더링하는 과정에서 발생하는 상황을 확인하기 위한 도구이다.
![[Pasted image 20240301225041.png]]
이 메뉴는 렌더링 과정에 개입해 디버깅에 필요한 내용을 기록해야 하기 때문에 프로덕션 빌드로 실행되는 리액트 애플리케이션에서는 사용할 수 없다.

### 설정 변경하기
![[Pasted image 20240301230521.png]]
톱니 모양의 설정 버튼을 누르면 설정 창이 나타난다.  
중요한 설정들
- General 탭의 Highlight updates when components render: 컴포넌트가 렌더링될 때마다 해당 컴포넌트에 하이라이트를 표시한다.
- ebugging 탭의 Hide logs during second renderin Strict Mode: 리액트 애플리케이션이 엄격 모드에서 실행되는 경우, 원활한 디버깅을 위해 useEffect 등이 두 번씩 작동하는 의도적인 작동이 숨겨져 있다. 이로 인해 useEffect 안에 넣은 console.log가 두 번씩 찍히기도 하는데, 이를 막고 싶다면 해당 버튼을 활성화하면 된다. 프로덕션 모드에서 는 해당 옵션과 관계없이 정상적으로 한 번씩 출력된다.
- Profiler 탭의 Record why each component rendered while profiling:프로파일링 도중 무엇 때문에 컴포넌트가 렌더링됐는지 기록한다.애플리케이션 속도가 조금 느려질 수는 있지만 디버깅에 도움이 되는 옵션이므로 켜두는 것이 좋다.

### 프로파일링
#### 프로파일링 메뉴
프로파일링 메뉴는 리액트가 렌더링할 때 어떠한 일이 벌어지는지 확인할 수 있는 도구다.
![[Pasted image 20240301230914.png]]
Start Profiling(첫 번째 버튼, 프로파일링 시작) : 이 버튼을 누르면 프로파일링이 시작된다. 그리고 다시 누르면 프로파일링이 중단되고 프로파일링 결과가 나타난다.  
Reload and Start profiling(두 번째, 새로고침 후 프로파일링 시작) : 해당 버튼을 누르면 웹페이지가 새로고침되면서 이와 동시에 프로파일링이 시작된다. 중단을 원하면 적색 'StartProfiling' 버튼을 누른다.  
Stop Profiling(세 번째, 프로파일링 종료) : 프로파일링된 현재 내용을 모두 지우는 버튼이다.  
Load Profile(네 번째, 프로파일 불러오기), Save Profile(다섯 번째, 프로파일 저장하기) :  프로파일링 결과를 저장하고 불러오는 버튼이다. 해당 프로파일링 정보가 담긴 JSON 파일이 다운로드되며, 이 파일을 다시 로딩해 프로파일링 정보를 불러올 수도 있다.  

![[Pasted image 20240301231644.png]]
#### Flamegraph
불꽃 모양의 아이콘을 가진 Flamegraph 탭에서는 렌더 커밋별로 어떠한 작업이 일어났는지 나타낸다. 너비가 넓을수록 해당 컴포넌트를 렌더링하는 데 오래 걸렸다는 것을 의미한다.   
마우스 커서를 가져다 대면 확인할 수 있는 렌더링 정보 이외에도 오른쪽에는 해당 커밋과 관련된 추가적인 정보를 확인할 수 있다.  

#### Ranked
Ranked는 해당 커밋에서 렌더링하는 데 오랜 시간이 걸린 컴포넌트를 순서대로 나열한 그래프다.  
앞선 Flamegraph와의 차이점은 모든 컴포넌트를 보여주는 것이 아니라 단순히 렌더링이 발생한 컴포넌트만 보여준다는 데 있다. 렌더링이 발생한 컴포넌트에 대한 정보만 파악하고 싶다면 Ranked 메뉴를 활용하면 좋다.  

#### 타임라인
imeline에서는 시간이 지남에 따라 컴포넌트에서 어떤 일이 일어났는지를 확인할 수 있다.