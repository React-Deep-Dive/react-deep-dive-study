# 모리딥 6장

## 리액트 개발 도구로 디버깅하기

### React-dev-tools

리액트 팀에서 원활하게 리액트 앱 개발을 위해 제공하는 개발 도구이다. 브라우저 extension으로 설치하여 편하게 사용이 가능하다.

<br/>

### component

<img width="336" alt="스크린샷 2024-03-01 오후 6 30 19" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/4658a5a3-d5ba-4cac-9935-25a8ca99d79b">

현재 리액트 앱에서 컴포넌트 트리를 볼 수 있으며, props와 state등 다양한 정보 확인이 가능하다.

<img width="415" alt="스크린샷 2024-03-01 오후 6 31 47" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/9e40ea1f-63dd-4385-bf5d-6c9921a31660">

컴포넌트가 익명 함수로 선언돼 있으면 Anonymous라는 이름으로 보여준다.


(memo로 감싼 익명함수는 옆에 memo가 표시된다.)

이후 리액트 16.9부터는 Anonymous컴포넌트가 아닌 \_C3, \_C5 등으로 좀 더 알아 볼 수 있는 key값 형태로 변경되긴 했다.

<br/>

### props, hooks

왼쪽 컴포넌트 트리에서 컴포넌트를 선택했을 때 자세한 정보를 보여준다.

<img width="502" alt="스크린샷 2024-03-01 오후 6 34 06" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/5087bb29-20fd-4c44-b5c4-1b80f0a3a060">

컴포넌트에서 사용중인 훅 정보를 확인 할 수 있는데, 여기서는 use라는 명칭이 사라진 체 표시된다.

<img width="180" alt="스크린샷 2024-03-01 오후 6 35 34" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/880aa15e-84eb-4cc4-bc06-5c284a2742fc">


hook내부에 콜백 되는 함수 등도 살펴 볼 수 있다.

<br/>

### 프로파일러

지금까지는 컴포넌트 자체 내용을 디버깅하는 것을 살펴봤지만, 렌더링과정에서는 성능을 체크할 수 있는 기술을 프로파일러에서 살펴볼 수 있다.

주의해야 할 점은 렌더링 과정에서 디버깅에 필요한 내용을 기록해야 하기 때문에 프로덕션 빌드로 실행 리액트 앱은 사용이 불가능 하다.
<img width="869" alt="스크린샷 2024-03-02 오후 3 22 46" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/2818377f-8b25-40c4-bf29-fe16483ca659">


프로파일링 도구..

<img width="154" alt="스크린샷 2024-03-02 오후 3 24 15" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/25c1811b-c15e-499a-bd4c-c7d4d849f4c2">


위의 이 버튼 들을 통해 기록하거나 저장할 수 있다.

<br/>

### FlameGraph
스크린샷 2024-03-02 오후 3.25.07
이 버튼을 통해 렌더 커밋별로 어떤 작업이 일어났는지 나타낸다.

<img width="469" alt="스크린샷 2024-03-02 오후 3 26 11" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/5dff0edc-ab28-4ef1-99e6-fded9ec34804">


위의 컴포넌트 너비가 넓을 수록 렌더링이 오래걸리는 것을 의미한다. 또한 렌더링관련 정보도 가져올 수 있다.

<img width="278" alt="스크린샷 2024-03-02 오후 3 37 38" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/479ca988-fc21-4bc7-8dac-ebaf9ff35d58">

책의 내용 중 노란색에 가까울수록 렌더링에 오래 걸린 컴포넌트다. 라는 말이 있는데 약간 오해를 살 수 있는 포인트가 있을 수 도 있다고 생각했다. 18.1ms라는 렌더링 시간 중에 코드가 얼마나 실행되는 시간에 따라 오래 소요되면 노란색 막대로 보이게 되는 것 같다!

(이는 바로 다음에 알아볼 ranked메뉴에서 확인가능하다.)

<br/>

### ranked
<img width="469" alt="스크린샷 2024-03-02 오후 3 40 11" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/93f51291-2db0-45fc-87d1-7dccd4fbdf39">

해당 커밋에서 렌더링하는데 오랜 시간이 걸린 컴포넌트를 순서대로 나열한 그래프다.

<br/>

### TimeLine

<img width="877" alt="스크린샷 2024-03-02 오후 3 42 14" src="https://github.com/chhw130/reat-deep-dive-study/assets/116826162/9fc3b8f3-02a8-40a6-a185-13822238844c">


마지막으로 타임라인은 시간이 지남에 따라 컴포넌트에서 어떤 일이 일어났는지를 알 수 있다.

이 타임라인 같은 경우 리액트 18이상에서만 확인 할 수 있다.

확인할 수 있는 점

- 상태변화 및 업데이트 시기
- 무엇이 렌더링 되었는지와 시점
- 리액트의 유휴 시간

결론
 책의 예제에서는 테스트용도로 리액트 컴포넌트를 여러개를 만들지 않아 그래프를 파악하기가 간단했지만, 내가 작성한 프로젝트 예제처럼 그래프가 엄청 커지면 알아보기도 힘들고 최적화하기도 어려울 것 같다. 규모가 커지기 전에 틈틈이 렌더링테스트를 해보고 성능을 개선하는 편이 좋을 것 같다.
